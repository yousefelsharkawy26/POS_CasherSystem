<ui:FluentWindow
    x:Class="POS_ModernUI.Views.Windows.LoginWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:POS_ModernUI.Views.Windows"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="{Binding ViewModel.ApplicationTitle, Mode=OneWay}" 
    d:DesignHeight="420" d:DesignWidth="600"
    Height="420" Width="600"
    d:DataContext="{d:DesignInstance local:LoginWindow, IsDesignTimeCreatable=True}"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ExtendsContentIntoTitleBar="True"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    WindowBackdropType="Mica"
    WindowCornerPreference="Round"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d"
    FlowDirection="RightToLeft"
    xmlns:conv="clr-namespace:POS_ModernUI.Helpers">

    <ui:FluentWindow.Resources>
        <conv:DbImageToPhysicalPathConverter x:Key="ProductImageConverter"/>
    </ui:FluentWindow.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="361*" />
            <RowDefinition Height="6*"/>
        </Grid.RowDefinitions>
        
        <ContentPresenter x:Name="RootContentDialog"
                          Grid.Row="0"
                          Grid.RowSpan="2" />
        <ui:TitleBar x:Name="TitleBar"
                     Title="{Binding ViewModel.ApplicationTitle}"
                     CloseWindowByDoubleClickOnIcon="True" 
                     VerticalAlignment="Center"
                     CloseClicked="TitleBar_CloseClicked">
            
            <ui:TitleBar.Icon>
                <ui:ImageIcon Source="pack://application:,,,/Assets/wpfui-icon-256.png" />
            </ui:TitleBar.Icon>
        </ui:TitleBar>

        <StackPanel Grid.Row="1"
                    Margin="70 20 70 0">
            <ui:TextBlock Text="تسجيل الدخول"
                          Appearance="Primary"
                          FontSize="30"
                          FontWeight="ExtraBold"/>
            
            <Grid Margin="0 20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <ui:TextBlock Text="اسم المستخدم :"
                              Appearance="Secondary"
                              VerticalAlignment="Bottom"
                              Margin="0 0 20 0"
                              Grid.Column="0"/>
                <ui:TextBox Text="{Binding ViewModel.Name}"
                            IsReadOnly="True"
                            Grid.Column="1"
                            x:Name="txtUserName"/>
            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <ui:TextBlock Text="كلمة السر :"
                  Appearance="Secondary"
                  VerticalAlignment="Bottom"
                  Margin="0 0 20 0"
                  Grid.Column="0"/>
                <ui:PasswordBox Password="{Binding ViewModel.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                Grid.Column="1"
                                KeyDown="PasswordBox_KeyDown"
                                x:Name="txtPassword"
                                />
            </Grid>
            <ui:TextBlock Text="{Binding ViewModel.ErrorMessage}"
                          Foreground="#FF7E1818"
                          FontWeight="ExtraBold"
                          Margin="50 20 0 0"/>

            <ui:Button Content="تسجيل الدخول"
                       Appearance="Primary"
                       HorizontalAlignment="Center"
                       Margin="0 20 0 0"
                       Command="{Binding ViewModel.LoginProcessCommand}"
                       Click="LoginButton_Click"/>

            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Margin="10">
                <ui:ToggleSwitch Margin="10 0"
                                 Command="{Binding ViewModel.ChangeThemeCommand}"
                                 IsChecked="{Binding ViewModel.IsDarkTheme}"/>
                <ui:TextBlock Text="Dark Mode"
                              FontSize="15"
                              FontWeight="Bold"
                              Appearance="Primary"/>

            </StackPanel>
        </StackPanel>
    </Grid>
</ui:FluentWindow>